<!DOCTYPE html>
<html lang="ca">
<head>
  <meta charset="utf-8" />
  <title>ðŸŽ„ðŸŽ¶ Calendari Musical ðŸŽ¶ðŸŽ„</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root{
      --accent:#c0392b;
      --accent-dark:#96281b;
      --opened-bg:#d4edda;
      --opened-border:#27ae60;
    }
    body{
      margin:0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(180deg,#fff 0%, #f6fbff 100%);
      color:#111;
      min-height:100vh;
      display:flex;
      flex-direction:column;
      align-items:center;
      padding:20px;
      box-sizing:border-box;
      overflow-x:hidden;
    }

    h1{
      margin:8px 0 4px 0;
      font-size:clamp(20px,4vw,28px);
    }
    .subtitle{color:#555;font-size:14px;margin-bottom:8px}

    .calendar{
      display:grid;
      grid-template-columns: repeat(6, 110px);
      gap:10px;
      justify-content:center;
      margin:16px 0 8px 0;
    }
    .day{
      background:#fff;
      border:2px solid var(--accent);
      border-radius:12px;
      width:110px;
      height:110px;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:1.4rem;
      font-weight:800;
      color:var(--accent-dark);
      cursor:pointer;
      transition: transform 180ms ease, box-shadow 220ms ease, background-color 240ms ease, border-color 240ms ease;
      user-select:none;
      box-shadow: 0 6px 14px rgba(0,0,0,0.06);
    }
    .day:hover{ transform: translateY(-6px) scale(1.02); box-shadow: 0 12px 22px rgba(0,0,0,0.08); }

    .day.locked{
      background:#f0f0f0;
      border-color:#ddd;
      color:#aaa;
      cursor:not-allowed;
      transform:none;
      box-shadow:none;
    }

    .day.opened{
      background:var(--opened-bg);
      border-color:var(--opened-border);
      color:#145a32;
    }

    #player{
      margin-top:18px;
      width:100%;
      max-width:720px;
      min-height:110px;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    #player .note{ color:#666; padding:12px 16px; border-radius:10px; background:rgba(255,255,255,0.6); box-shadow:0 4px 10px rgba(0,0,0,0.04);}

    /* responsive */
    @media (max-width:900px){
      .calendar{ grid-template-columns: repeat(4, 95px); }
      .day{ width:95px; height:95px; font-size:1.2rem; }
    }
    @media (max-width:600px){
      .calendar{ grid-template-columns: repeat(3, 100px); gap:8px; }
      .day{ width:100px; height:100px; font-size:1.1rem; padding:6px; }
      iframe{ width:100%; height:240px; border-radius:8px; }
    }

    /* SNOW */
    .snowflake {
      position: fixed;
      top: -10px;
      z-index: 9999;
      user-select: none;
      pointer-events: none;
      color: #9bb7d4;
      font-size: 14px;
      opacity: 0.9;
      animation: fall linear;
    }
    @keyframes fall {
      to { transform: translateY(110vh) rotate(360deg); }
    }

    /* small footer */
    footer{ margin-top:18px; color:#666; font-size:13px}
  </style>
</head>
<body>
  <h1>ðŸŽ„ðŸŽ¶ Calendari Musical ðŸŽ¶ðŸŽ„</h1>
  <div class="subtitle">Fes clic al nÃºmero del dia per escoltar la canÃ§Ã³ (nomÃ©s disponible a partir del dia corresponent).</div>

  <div class="calendar" id="calendar" aria-live="polite"></div>

  <div id="player"><div class="note">Cap canÃ§Ã³ seleccionada</div></div>

  <footer>Si obres la web des d'una app de missatgeria (WhatsApp) pot no executar-se correctament. Obre-la amb Chrome / Safari.</footer>

  <script>
    // =========================
    // CONFIG: llista de 24 canÃ§ons (embeds)
    // Cada index correspon al dia 1..24 (songs[0] -> dia 1)
    // =========================
    const songs = [
      "https://open.spotify.com/embed/track/1ZZ45sLJAeOMpmW807hIm8",
      "https://open.spotify.com/embed/track/19herHhe8mbbOMYILYWGnw",
      "https://open.spotify.com/embed/track/17phhZDn6oGtzMe56NuWvj",
      "https://open.spotify.com/embed/track/3gxEZXUjrNbl3TlSrTGbR5",
      "https://open.spotify.com/embed/track/2wnsBaxrmkthIFAm6vqCuX",
      "https://open.spotify.com/embed/track/5Hk4Mpex0s2ndUpDQ5v2rU",
      "https://open.spotify.com/embed/track/7h2nmmoWDi2UpfYKLKWLYB",
      "https://open.spotify.com/embed/track/1gVgkQFOKa8Wc1HYsJtPdH",
      "https://open.spotify.com/embed/track/5NlFXQ0si6U87gXs6hq81B",
      "https://open.spotify.com/embed/track/6C4LXC9UFH1IKiHYOp0BiJ",
      "https://open.spotify.com/embed/track/7ifOnwJC0oH7cfbJQbUye1",
      "https://open.spotify.com/embed/track/76ZATrojG4UsYHhE6ulqNU",
      "https://open.spotify.com/embed/track/2SDx0PooHZI1SQKR0y44bs",
      "https://open.spotify.com/embed/track/6nLvaCZFR1wEzW3sIKpsnr",
      "https://open.spotify.com/embed/track/4CNL4GBNTdVIU5Nk6hB4LC",
      "https://open.spotify.com/embed/track/5LxvwujISqiB8vpRYv887S",
      "https://open.spotify.com/embed/track/2le9fblYnfoLr9dkZIsJUa",
      "https://open.spotify.com/embed/track/6ECp64rv50XVz93WvxXMGF",
      "https://open.spotify.com/embed/track/003vvx7Niy0yvhvHt4a68B",
      "https://open.spotify.com/embed/track/1G5JaDf4CTkyoLRAO0pAYH",
      "https://open.spotify.com/embed/track/0FQTpFFuHzdsmmbNTpuaFd",
      "https://open.spotify.com/embed/track/0f0k0OJ9VbaLHX4J1t2qUy",
      "https://open.spotify.com/embed/track/745H5CctFr12Mo7cqa1BMH",
      "https://open.spotify.com/embed/track/4RCWB3V8V0dignt99LZ8vH"
    ];

    // today uses day-of-month only (chill mode as you chose)
    const today = new Date().getDate();
    const calendar = document.getElementById('calendar');
    const player = document.getElementById('player');

    // create days
    for(let i=1;i<=24;i++){
      const el = document.createElement('button');
      el.type = 'button';
      el.className = 'day' + (i>today ? ' locked' : '');
      el.setAttribute('aria-label', 'Dia '+i);
      el.textContent = i;
      // click handler
      el.addEventListener('click', (e)=>{
        if(i>today){
          // locked
          const prev = document.activeElement;
          el.blur();
          // small feedback
          el.animate([{transform:'scale(1)'},{transform:'scale(0.98)'}],{duration:120});
          return;
        }
        // mark opened
        el.classList.add('opened');
        // show player iframe
        const src = songs[i-1] || '';
        if(!src){
          player.innerHTML = '<div class="note">No s\'ha trobat canÃ§Ã³ per a aquest dia.</div>';
          return;
        }
        player.innerHTML = `<iframe src="${src}" width="100%" height="380" frameborder="0" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"></iframe>`;
        player.scrollIntoView({behavior:'smooth', block:'center'});
      });
      calendar.appendChild(el);
    }

    // ===== Snow effect (light) =====
    function makeSnow(){
      const count = 18;
      for(let i=0;i<count;i++){
        const f = document.createElement('div');
        f.className='snowflake';
        f.style.left = Math.random()*100 + 'vw';
        f.style.fontSize = (8+Math.random()*18)+'px';
        f.style.opacity = (0.4+Math.random()*0.6).toFixed(2);
        const delay = Math.random()*-20;
        f.style.animationDuration = (8+Math.random()*12)+'s';
        f.style.animationDelay = delay+'s';
        f.textContent = 'â„';
        document.body.appendChild(f);
      }
    }
    makeSnow();

    // Accessibility: keyboard open day with enter
    calendar.addEventListener('keydown', (e)=>{
      if(e.key==='Enter' && document.activeElement.classList.contains('day') && !document.activeElement.classList.contains('locked')){
        document.activeElement.click();
      }
    });
  </script>
</body>
</html>
